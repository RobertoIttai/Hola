<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Compartir ubicación</title>
</head>
<body>
  <button onclick="enviarUbicacion()">Compartir ubicación</button>
  <p id="mensaje"></p>

  <script>
    function enviarUbicacion() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;

            fetch("https://script.google.com/macros/s/AKfycbwdwxubfNMMa0bfIdWJTu3_WyI_W9_pa_dnb3k68-h9MJ5-SNDJc0VvkzeFUNIjCU4HNg/exec", {
              method: "POST",
              mode: "cors",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify({ lat, lon })
            })
            .then(res => res.text())
            .then(msg => {
              document.getElementById("mensaje").innerText = "✅ Ubicación enviada correctamente.";
            })
            .catch(err => {
              document.getElementById("mensaje").innerText = "❌ Error al enviar ubicación.";
            });
          },
          function(error) {
            document.getElementById("mensaje").innerText = "❌ No se pudo obtener la ubicación.";
          }
        );
      } else {
        document.getElementById("mensaje").innerText = "❌ Tu navegador no soporta geolocalización.";
      }
    }
  </script>
</body>
</html>

