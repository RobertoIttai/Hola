<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Compartir ubicación</title>
</head>
<body>
  <h1>Enviar mi ubicación a la hoja</h1>
  <button onclick="enviarUbicacion()">Compartir ubicación</button>
  <p id="mensaje"></p>

  <script>
    function enviarUbicacion() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;

            fetch("https://script.google.com/macros/s/AKfycbxCBnNTNIHllRhugo_Bfu5tET4u6haGlkiESO8RcuyAhaK6UnBO84lWumyh0jtwH-DW8Q/exec", {
              method: "POST",
              body: JSON.stringify({ lat, lon }),
              headers: {
                "Content-Type": "application/json"
              }
            })
            .then(res => res.text())
            .then(msg => {
              document.getElementById("mensaje").innerText = "✅ Ubicación enviada correctamente.";
            })
            .catch(err => {
              document.getElementById("mensaje").innerText = "❌ Error al enviar ubicación.";
            });
          },
          function(error) {
            document.getElementById("mensaje").innerText = "❌ No se pudo obtener la ubicación.";
          }
        );
      } else {
        document.getElementById("mensaje").innerText = "❌ Tu navegador no soporta geolocalización.";
      }
    }
  </script>
</body>
</html>


