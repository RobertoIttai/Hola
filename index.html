<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Compartir ubicación</title>
</head>
<body>
  <h1>Enviar mi ubicación a la hoja</h1>
  <button onclick="enviarUbicacion()">Compartir ubicación</button>
  <p id="mensaje"></p>

  <script>
    function enviarUbicacion() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            fetch("https://script.google.com/macros/s/AKfycbwdwxubfNMMa0bfIdWJTu3_WyI_W9_pa_dnb3k68-h9MJ5-SNDJc0VvkzeFUNIjCU4HNg/exec", {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify({
                latitude: pos.coords.latitude,
                longitude: pos.coords.longitude
              })
            })
            .then(res => res.text())
            .then(msg => {
              document.getElementById("mensaje").innerText = "✅ Ubicación enviada correctamente.";
            })
            .catch(err => {
              document.getElementById("mensaje").innerText = "❌ Error al enviar ubicación: " + err.message;
              console.error(err);
            });
          },
          function(error) {
            document.getElementById("mensaje").innerText = "❌ No se pudo obtener la ubicación: " + error.message;
          }
        );
      } else {
        document.getElementById("mensaje").innerText = "❌ Tu navegador no soporta geolocalización.";
      }
    }
  </script>
</body>
</html>
